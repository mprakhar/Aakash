/*
// Documentation: https://github.com/mprakhar/Aakash
// Author: Prakhar Misra
// Created: 20190910
// Last updated: 20190910
// Purpose: GEE JS Code to identify land-use of the urban morphology using building height and nighttime light information
*/


var nDSM_Hyderabad = ee.Image("users/prakhar/AW3D_C18_nDSM"),
    greenestL8C = ee.ImageCollection("LANDSAT/LC8_L1T_ANNUAL_GREENEST_TOA"),
    nighttimeLightC = ee.ImageCollection("NOAA/VIIRS/DNB/MONTHLY_V1/VCMSLCFG"),
    AW3D30 = ee.Image("JAXA/ALOS/AW3D30_V1_1"),
    landform = ee.Image("CSP/ERGo/1_0/Global/ALOS_landforms"),
    location = /* color: #98ff00 */ee.Geometry.Polygon(
        [[[75.54042519832547, 31.091959598228556],
          [75.54042519832547, 30.594394031694762],
          [76.18724526668484, 30.594394031694762],
          [76.18724526668484, 31.091959598228556]]], null, false),
    landsat8 = ee.ImageCollection("LANDSAT/LC08/C01/T1_SR"),
    nDSM_Jaipur = ee.Image("users/prakhar/AW3D_Jaipur_nDSML0"),
    GHSL = ee.Image("JRC/GHSL/P2016/BUILT_LDSMT_GLOBE_V1"),
    nDSM_Ludhiana = ee.Image("users/prakhar/AW3D_Ludhiana_nDSML0"),
    R = /* color: #d63000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[75.8350893548245, 30.92205802547658],
                  [75.83607640774198, 30.921358525312943],
                  [75.83720293552824, 30.921616236494685],
                  [75.83882298977323, 30.922104045044833],
                  [75.83847966701933, 30.922794335911853],
                  [75.83921995670744, 30.92284955896603],
                  [75.83996024639555, 30.922030413724972],
                  [75.84129062206694, 30.922021209806015],
                  [75.84178414852568, 30.922987616461917],
                  [75.84073272259184, 30.92403684691837],
                  [75.83947744877287, 30.923392583966923],
                  [75.83932724506803, 30.923917198412674],
                  [75.84038939983793, 30.924404995227867],
                  [75.8398422291989, 30.924874382267276],
                  [75.83830800564238, 30.923815957252494],
                  [75.83781447918363, 30.92390799467526],
                  [75.83678451092192, 30.92348462179711],
                  [75.83502498180815, 30.92323611945233]]]),
            {
              "class": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.83790030987211, 30.920511755112862],
                  [75.83786812336393, 30.918459226675306],
                  [75.8390697530026, 30.918569677757247],
                  [75.83903756649443, 30.920254040955438]]]),
            {
              "class": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.83194580585905, 30.918118668369928],
                  [75.83343711407133, 30.918293549813306],
                  [75.83305087597319, 30.92053016324041],
                  [75.83147373707243, 30.920088367201885]]]),
            {
              "class": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.813384919476, 30.921680664181636],
                  [75.81504788906523, 30.92130330139796],
                  [75.81487622768827, 30.924543050478597],
                  [75.81359949619718, 30.924543050478597],
                  [75.81352439434477, 30.922196084114947]]]),
            {
              "class": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.81455436260649, 30.92839931328473],
                  [75.81490841419645, 30.92472712383622],
                  [75.81844893009611, 30.92485597497578],
                  [75.81829872639128, 30.928353296745534]]]),
            {
              "class": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.81145372898527, 30.931997738075797],
                  [75.8118185094113, 30.928785851339747],
                  [75.81688252003141, 30.928721428439076],
                  [75.81692543537565, 30.931960926231564]]]),
            {
              "class": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.77897906982366, 30.865748446165785],
                  [75.78052402221624, 30.86532481606041],
                  [75.78333497726385, 30.867765268169112],
                  [75.78288436614935, 30.868244142045675],
                  [75.78089953147833, 30.868188887489715],
                  [75.77888251029913, 30.86742452953099],
                  [75.77860356056158, 30.866420724881575]]]),
            {
              "class": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.76770306312505, 30.858021507123237],
                  [75.76813221656744, 30.858997769783894],
                  [75.76997757636968, 30.85920038909062],
                  [75.76940894805853, 30.860821328130935],
                  [75.76867938720648, 30.860618712249437],
                  [75.76791763984625, 30.860323997475653],
                  [75.76737046920721, 30.859863503828166],
                  [75.76640487396185, 30.86055424347008],
                  [75.76545000755254, 30.859891133509397]]]),
            {
              "class": 1,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.74538708412115, 30.85891487994411],
                  [75.74769378387396, 30.86002007191646],
                  [75.7480800219721, 30.860655551532464],
                  [75.74464679443304, 30.862193578967698],
                  [75.74371338569586, 30.86111604137606],
                  [75.74289799415533, 30.85998323238926]]]),
            {
              "class": 1,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.74362755500738, 30.857404430314904],
                  [75.74421764099066, 30.858067557472108],
                  [75.74277997695867, 30.85884120002637],
                  [75.74191094123785, 30.858270178744366]]]),
            {
              "class": 1,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.80820687903088, 30.882909787717814],
                  [75.82005151404064, 30.88701632530092],
                  [75.81146844519299, 30.890441374455154],
                  [75.80462344778698, 30.888563136860007]]]),
            {
              "class": 1,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.8045376170985, 30.87523027422463],
                  [75.80889352453869, 30.882412571668176],
                  [75.79629787100475, 30.878803074095767]]]),
            {
              "class": 1,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.8315528262965, 30.869134107121056],
                  [75.84133752478283, 30.86653713267143],
                  [75.8452213634364, 30.876887775266127],
                  [75.83451398504894, 30.881454963116372],
                  [75.82820542944592, 30.87276238622075]]]),
            {
              "class": 1,
              "system:index": "12"
            })]),
    C = /* color: #370cff */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[75.88959690692923, 30.885133778833726],
                  [75.88959690692923, 30.88507853401604],
                  [75.89051958683035, 30.88507853401604],
                  [75.89051958683035, 30.885133778833726]]], null, false),
            {
              "class": 2,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.84993805643558, 30.91852896101471],
                  [75.85005339142322, 30.918312660767537],
                  [75.85119869467258, 30.918436918416116],
                  [75.85057105776309, 30.91981524706342],
                  [75.84978785273074, 30.918989172679293]]]),
            {
              "class": 2,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.83413725110302, 30.900138331033784],
                  [75.8343679210783, 30.902315531046202],
                  [75.83311264725933, 30.902402986249008],
                  [75.832152416432, 30.90191968018156],
                  [75.83159988137493, 30.90045133535167]]]),
            {
              "class": 2,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.85111487968265, 30.910687814157047],
                  [75.85222531421482, 30.91097316903464],
                  [75.85191686017811, 30.911467935555642],
                  [75.85087348087131, 30.91139429604944]]]),
            {
              "class": 2,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.83846096654702, 30.913633455341564],
                  [75.83862189908791, 30.913267566766987],
                  [75.83904300590325, 30.91343555351896],
                  [75.83948020597268, 30.913085772552403],
                  [75.83918248077202, 30.912586411983053],
                  [75.83952848573495, 30.91227574856278],
                  [75.84027950425912, 30.912234326697202],
                  [75.84031705518532, 30.913640358886134],
                  [75.83983425756264, 30.913974029612824],
                  [75.83871577640343, 30.913725502561437]]]),
            {
              "class": 2,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.84022854228783, 30.910381830487573],
                  [75.84031437297631, 30.910294382575135],
                  [75.84104125161934, 30.910411746860326],
                  [75.84101174732018, 30.910878901313875],
                  [75.84024999995995, 30.91089501004746]]]),
            {
              "class": 2,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.8331336703252, 30.90261466483584],
                  [75.83417704963199, 30.902697516876305],
                  [75.83413949870578, 30.90335572776121],
                  [75.83362719678394, 30.903417866317234],
                  [75.8336030569028, 30.904046153895546],
                  [75.83312294148914, 30.903961001608216],
                  [75.83306929730884, 30.902812589035815]]]),
            {
              "class": 2,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.86174764024099, 30.91181259523015],
                  [75.86170472489675, 30.910275364319162],
                  [75.8639631448873, 30.910229339060844],
                  [75.863909500707, 30.911757365804743]]]),
            {
              "class": 2,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.86104190030494, 30.897707041191598],
                  [75.86078440823951, 30.896883077538032],
                  [75.8616480795423, 30.896791014119568],
                  [75.86172318139472, 30.89773005683429]]]),
            {
              "class": 2,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.86394673266807, 30.897414742047847],
                  [75.86423641124168, 30.897934895810693],
                  [75.86386090197959, 30.89808679858881],
                  [75.86349343934455, 30.897663311455187]]]),
            {
              "class": 2,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.82206962140685, 30.913562465809534],
                  [75.8222412827838, 30.912683409746695],
                  [75.82267580064422, 30.912701819380533],
                  [75.82254169019348, 30.913465816061656],
                  [75.82348046334869, 30.913682127266885],
                  [75.82409200700408, 30.91385241446742],
                  [75.82377550634033, 30.915394190191716],
                  [75.82299230130798, 30.915352769676122],
                  [75.82320687802917, 30.914542764878295],
                  [75.82272944482452, 30.91442310449727],
                  [75.82250413926727, 30.91505362097556],
                  [75.82188186677581, 30.91488793821584]]]),
            {
              "class": 2,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.78657560735292, 30.88462066158638],
                  [75.78900568872041, 30.885449334467623],
                  [75.78852825551576, 30.886485165488082],
                  [75.7863020220334, 30.885573634781505]]]),
            {
              "class": 2,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.77995055108613, 30.88330858153019],
                  [75.78066938310212, 30.882014899038243],
                  [75.78260057359284, 30.882208261944644],
                  [75.78277759938783, 30.884279982878045],
                  [75.78043334870881, 30.88348352657601]]]),
            {
              "class": 2,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.77120654969758, 30.88052783316893],
                  [75.77264421372956, 30.881048078652277],
                  [75.77247791677064, 30.881420996242728],
                  [75.77105634599275, 30.881048078652277]]]),
            {
              "class": 2,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.84403584175675, 30.897985277743143],
                  [75.84403584175675, 30.895076064411583],
                  [75.84722230606644, 30.895076064411583],
                  [75.84722230606644, 30.897985277743143]]], null, false),
            {
              "class": 2,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.84423363349765, 30.897755121680582],
                  [75.84513753793567, 30.897787343562666],
                  [75.84511876247257, 30.898452492848577],
                  [75.84423899791568, 30.898450191301908]]]),
            {
              "class": 2,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.82593841804987, 30.898131966585783],
                  [75.82678599609858, 30.8985738639979],
                  [75.82584722294337, 30.89983049861637],
                  [75.82472069515711, 30.89960034698967]]]),
            {
              "class": 2,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.82556827320582, 30.899991604425846],
                  [75.8250962044192, 30.9006820548242],
                  [75.82439883007532, 30.90052555317034],
                  [75.8247367884112, 30.899784468335298]]]),
            {
              "class": 2,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.8295272137118, 30.899715422872177],
                  [75.82984371437556, 30.90049793520487],
                  [75.82930190815455, 30.90094442466988],
                  [75.82787497295863, 30.900493332209855]]]),
            {
              "class": 2,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.82162729369452, 30.896943873777516],
                  [75.82223883734991, 30.897378871956217],
                  [75.8214609967356, 30.898502032717314],
                  [75.82078776227286, 30.898292591853465]]]),
            {
              "class": 2,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.82423809775833, 30.89341549699078],
                  [75.8250427604628, 30.89441901885212],
                  [75.82408789405349, 30.895035857346016],
                  [75.82304183253768, 30.894359176100213]]]),
            {
              "class": 2,
              "system:index": "20"
            })]),
    I = /* color: #f11504 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[75.90653430540533, 30.88493489140017],
                  [75.90786468107672, 30.884235119902094],
                  [75.90900193769903, 30.889225483816997],
                  [75.90724240858526, 30.8902014286506],
                  [75.90483914930792, 30.886739541672245]]]),
            {
              "class": 3,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.9037018926856, 30.87769753397057],
                  [75.90539704878302, 30.880165294877138],
                  [75.89990388472052, 30.88314862244627],
                  [75.8998824270484, 30.879815392347087]]]),
            {
              "class": 3,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.908637157273, 30.879281328127007],
                  [75.91069709379644, 30.882504084233954],
                  [75.90799342710943, 30.883995723216056],
                  [75.90670596678228, 30.880054799479364]]]),
            {
              "class": 3,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.91093312818975, 30.882725069252405],
                  [75.91430198271246, 30.88791807043628],
                  [75.91022502500982, 30.8899620468761],
                  [75.90814363081427, 30.88419828968164]]]),
            {
              "class": 3,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.92157613356085, 30.879299744184163],
                  [75.92415105421514, 30.88296446911383],
                  [75.91707002241583, 30.88662905385716],
                  [75.91451655943365, 30.88287239231485]]]),
            {
              "class": 3,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.91912995893927, 30.873369590853756],
                  [75.92136155683966, 30.8767214617429],
                  [75.91402303297491, 30.880515196129323],
                  [75.91179143507452, 30.877402871704287]]]),
            {
              "class": 3,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.92151176054449, 30.87222771795479],
                  [75.92470895369024, 30.87662937894405],
                  [75.92254172880621, 30.878102693107177],
                  [75.91934453566046, 30.873388008047083]]]),
            {
              "class": 3,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.9321762235877, 30.883423936667132],
                  [75.93595277388067, 30.883405521402747],
                  [75.93648921568365, 30.88596520920051],
                  [75.93453656752081, 30.885983623972827],
                  [75.93436490614386, 30.884805071407424],
                  [75.93254100401373, 30.88487873136757],
                  [75.93215476591558, 30.883921147467582]]]),
            {
              "class": 3,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.94206821043463, 30.877052043911206],
                  [75.94286214430304, 30.878212275592336],
                  [75.93964349348516, 30.879611901463544],
                  [75.93891393263311, 30.878617432552346]]]),
            {
              "class": 3,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.95155250151129, 30.877530871386917],
                  [75.95236789305181, 30.878599016364078],
                  [75.95386993010015, 30.87771503516351],
                  [75.95447074491949, 30.878820010389937],
                  [75.95180999357672, 30.879814477198533],
                  [75.9503294142005, 30.878359605594188]]]),
            {
              "class": 3,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.95979224760504, 30.872208385317293],
                  [75.96144448835821, 30.875007792005814],
                  [75.95987807829351, 30.875505046483067],
                  [75.95850478727789, 30.87276090627225]]]),
            {
              "class": 3,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.96565019209356, 30.876296964953294],
                  [75.96708785612554, 30.876407464684643],
                  [75.96695911009283, 30.877862365929946],
                  [75.96575748045416, 30.87797286385612]]]),
            {
              "class": 3,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.9345916249182, 30.86705552028307],
                  [75.9350422360327, 30.866631895953805],
                  [75.93563232201598, 30.866576640468512],
                  [75.9391299225714, 30.866677942167243],
                  [75.93929085511229, 30.8673686327145],
                  [75.93760642785094, 30.86726733174567],
                  [75.9375635125067, 30.86793039068974],
                  [75.93573961037657, 30.868059318285155],
                  [75.93578252572081, 30.869127568833168],
                  [75.93547138947508, 30.86916440484661],
                  [75.93539487440557, 30.868690593874266],
                  [75.93462239820929, 30.86867217577827]]]),
            {
              "class": 3,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.84250811064544, 30.938889761295474],
                  [75.84440711462798, 30.938954177344723],
                  [75.84440175020995, 30.94046794200498],
                  [75.84253493273559, 30.94048174521984]]]),
            {
              "class": 3,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.84860208952728, 30.938650501303982],
                  [75.8491278024942, 30.938655102463308],
                  [75.84918144667449, 30.940035440262605],
                  [75.8486235471994, 30.94004924353993]]]),
            {
              "class": 3,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.92930878190964, 30.853329990588993],
                  [75.93390072374314, 30.85948242230067],
                  [75.93293512849777, 30.859998177086982],
                  [75.93048895387619, 30.857806200086547],
                  [75.92943752794235, 30.858082502468367],
                  [75.92845047502487, 30.85684834566591],
                  [75.92930878190964, 30.856240471551946],
                  [75.9278067448613, 30.854582613475554]]]),
            {
              "class": 3,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.92930878190964, 30.853072095610933],
                  [75.93254889039963, 30.850585215596865],
                  [75.9331926205632, 30.851874716986206],
                  [75.93169058351486, 30.852924726740685],
                  [75.93267763643235, 30.85421419667778],
                  [75.93454445390671, 30.85320104318664],
                  [75.9358748295781, 30.854637875873163],
                  [75.93207682161301, 30.856866766033452],
                  [75.93021000413864, 30.85434314271799]]]),
            {
              "class": 3,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.93463028459519, 30.848890415978516],
                  [75.93538130311936, 30.849645710811487],
                  [75.93660439043015, 30.848890415978516],
                  [75.93832100419968, 30.850972067833894],
                  [75.9364327290532, 30.85205893005524],
                  [75.93731249361008, 30.853108937793102],
                  [75.93557442216843, 30.8541405131484],
                  [75.93353594331711, 30.85211419390697],
                  [75.93544567613571, 30.850732588061593],
                  [75.9347590306279, 30.85010625352273],
                  [75.93454445390671, 30.85021678344441],
                  [75.93437279252976, 30.850345734858738],
                  [75.93336428194016, 30.849645710811487]]]),
            {
              "class": 3,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.9257897236821, 30.843768991713215],
                  [75.92673386125534, 30.843437379279408],
                  [75.92733467607468, 30.843916374649247],
                  [75.92819298295944, 30.8436216085508],
                  [75.92965210466355, 30.842792574043898],
                  [75.93111122636765, 30.842092494881985],
                  [75.93259180574387, 30.8405080863392],
                  [75.93353594331711, 30.841318717234095],
                  [75.93428696184128, 30.840968672915018],
                  [75.93503798036545, 30.84159506711035],
                  [75.93280638246506, 30.84340053338268],
                  [75.93321407823532, 30.843676877263235],
                  [75.93237722902268, 30.844155871437437],
                  [75.93098248033493, 30.84470855405164],
                  [75.93055332689255, 30.844155871437437],
                  [75.92727030305832, 30.846053401780548],
                  [75.92559660463303, 30.846956097216722],
                  [75.92403019456833, 30.844819090192455]]]),
            {
              "class": 3,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.89952391540203, 30.960941145338083],
                  [75.90109032546673, 30.960784742281774],
                  [75.9010688677946, 30.963710357035172],
                  [75.89958828841839, 30.963728756844347]]]),
            {
              "class": 3,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.89752835189495, 30.96179675752445],
                  [75.8983115569273, 30.96181515770232],
                  [75.89835447227154, 30.962394761490675],
                  [75.89748543655071, 30.962422361583336]]]),
            {
              "class": 3,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.8978609458128, 30.96073874133412],
                  [75.89862269317302, 30.960793942468644],
                  [75.89846176063213, 30.96162195565781],
                  [75.89782875930462, 30.96162195565781]]]),
            {
              "class": 3,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.89864415084514, 30.95830985982837],
                  [75.90004962836895, 30.958254657258088],
                  [75.90008181487713, 30.957481817924364],
                  [75.90102595245037, 30.95749101842942],
                  [75.90110105430279, 30.958861883776287],
                  [75.89863342200908, 30.95889868525936]]]),
            {
              "class": 3,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.78274447545937, 30.83747985114762],
                  [75.78292686567238, 30.83779766615001],
                  [75.78274447545937, 30.83787596823538],
                  [75.78256744966438, 30.837548941455037]]]),
            {
              "class": 3,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.72524777336548, 30.861615687896006],
                  [75.72587541027497, 30.861657131657484],
                  [75.7257734863324, 30.86229720525436],
                  [75.72534433289002, 30.8623294390635]]]),
            {
              "class": 3,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.993228335597, 30.89632166717233],
                  [75.99483766100593, 30.896505794823295],
                  [75.99483766100593, 30.897021350362234],
                  [75.99318542025276, 30.89716865143491]]]),
            {
              "class": 3,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.99797048113533, 30.895529914238374],
                  [75.99919356844612, 30.895640391785],
                  [75.99908628008552, 30.89639531827519],
                  [75.99799193880744, 30.896340079953333]]]),
            {
              "class": 3,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.99498786471077, 30.89451719745485],
                  [75.99618949434944, 30.894535610582892],
                  [75.99676885149665, 30.894848633217645],
                  [75.99681176684089, 30.895621978869414],
                  [75.9952453567762, 30.895511501301574]]]),
            {
              "class": 3,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.99046029589363, 30.889527109265924],
                  [75.9934643699903, 30.88947186698209],
                  [75.9934643699903, 30.890208428146344],
                  [75.99112548372932, 30.890392567552283],
                  [75.99071778795906, 30.890392567552283]]]),
            {
              "class": 3,
              "system:index": "28"
            })]),
    builtup = /* color: #ffc82d */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[75.88051119692386, 30.910766133497],
                  [75.88261404879154, 30.911392071602297],
                  [75.88233509905399, 30.913380318424657],
                  [75.88589707262577, 30.91198118607884],
                  [75.88703432924808, 30.9120180056132],
                  [75.88518896944584, 30.91593920492009],
                  [75.87986746676029, 30.916123294834847]]]),
            {
              "class": 1,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.87602654345096, 30.92387315886632],
                  [75.87870875246585, 30.922069208578865],
                  [75.87772169954837, 30.92076224374959],
                  [75.88072577364505, 30.92098314046775],
                  [75.88242092974247, 30.922787111238435],
                  [75.88173428423465, 30.92512485947912],
                  [75.87787190325321, 30.9262661016429],
                  [75.87591925509037, 30.925327338921285]]]),
            {
              "class": 1,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.88182011492313, 30.93007627925978],
                  [75.88690558321537, 30.929487276215237],
                  [75.88830033190311, 30.930168310657766],
                  [75.88531771547855, 30.935542790658733],
                  [75.88177719957889, 30.93068368484949]]]),
            {
              "class": 1,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.87527552492679, 30.933702249331535],
                  [75.87720671541751, 30.93213776134394],
                  [75.87948122866214, 30.93224819662987],
                  [75.88269987948001, 30.9343648482913],
                  [75.8792022789246, 30.936959983333864],
                  [75.87525406725467, 30.93390471061202]]]),
            {
              "class": 1,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.9041724638787, 30.886556589495513],
                  [75.9041724638787, 30.875359821675342],
                  [75.92369894550711, 30.875359821675342],
                  [75.92369894550711, 30.886556589495513]]], null, false),
            {
              "class": 1,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77356472638826, 30.886815920524295]),
            {
              "class": 1,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77354326871614, 30.886636377903223]),
            {
              "class": 1,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77351108220796, 30.88610695539467]),
            {
              "class": 1,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77270105508546, 30.88607933327043]),
            {
              "class": 1,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77282980111818, 30.8863647615035]),
            {
              "class": 1,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77277615693788, 30.886502871633503]),
            {
              "class": 1,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77305510667543, 30.88676988398686]),
            {
              "class": 1,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77307119992952, 30.887303906460588]),
            {
              "class": 1,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77363446382265, 30.887870151176127]),
            {
              "class": 1,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77311411527376, 30.887727439408877]),
            {
              "class": 1,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77300146249513, 30.887925394383767]),
            {
              "class": 1,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77300146249513, 30.8882384386253]),
            {
              "class": 1,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77458396581392, 30.888717210192123]),
            {
              "class": 1,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77604308751802, 30.888427185394153]),
            {
              "class": 1,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77273860601167, 30.88576628197232]),
            {
              "class": 1,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77219679979066, 30.885908996661584]),
            {
              "class": 1,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77248111394624, 30.887244059262517]),
            {
              "class": 1,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77201440957765, 30.88762155634738]),
            {
              "class": 1,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77179983285646, 30.887870151176127]),
            {
              "class": 1,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77198222306947, 30.888353528162746]),
            {
              "class": 1,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77197685865144, 30.888150970484354]),
            {
              "class": 1,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77223435071687, 30.88814636689577]),
            {
              "class": 1,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77233091024141, 30.88789316918317]),
            {
              "class": 1,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Point([75.7717891040204, 30.88843178896923]),
            {
              "class": 1,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77891841558198, 30.887211833832687]),
            {
              "class": 1,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Point([75.7786341014264, 30.88716579748556]),
            {
              "class": 1,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77841952470521, 30.887179608392024]),
            {
              "class": 1,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77832832959871, 30.88716579748556]),
            {
              "class": 1,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77517941621522, 30.888261456543876]),
            {
              "class": 1,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Point([75.7754100861905, 30.888127952539246]),
            {
              "class": 1,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77539935735444, 30.887791889910734]),
            {
              "class": 1,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77516332296113, 30.887934601581957]),
            {
              "class": 1,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77250793603639, 30.885536096541585]),
            {
              "class": 1,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77250257161836, 30.885310514282807]),
            {
              "class": 1,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77270105508546, 30.885310514282807]),
            {
              "class": 1,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Point([75.7727439704297, 30.88481331069374]),
            {
              "class": 1,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77191785005311, 30.885200024819387]),
            {
              "class": 1,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77191785005311, 30.88503429038527]),
            {
              "class": 1,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77585533288698, 30.88476727319385]),
            {
              "class": 1,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77610209611635, 30.885149383772713]),
            {
              "class": 1,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77672973302583, 30.885761678269134]),
            {
              "class": 1,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Point([75.77807083753328, 30.884933008089934]),
            {
              "class": 1,
              "system:index": "46"
            })]),
    river = /* color: #00ffff */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[75.88822057201423, 31.011216408668382],
                  [75.88921835376777, 31.01173134550694],
                  [75.89099934055366, 31.01243937911749],
                  [75.89070966198005, 31.013009480279962],
                  [75.88864972545662, 31.012954309348743]]]),
            {
              "class": 2,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.88503410770454, 31.00912904691783],
                  [75.8851521249012, 31.0094233033244],
                  [75.88581731273689, 31.010526756758786],
                  [75.88680436565437, 31.010793422755523],
                  [75.88710477306404, 31.011391119693265],
                  [75.88551690532722, 31.011179627359155],
                  [75.88395049526252, 31.01051756136626]]]),
            {
              "class": 2,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.87988426639595, 31.007069226637924],
                  [75.88081767513313, 31.0074002721847],
                  [75.8814614052967, 31.008246272247966],
                  [75.88097860767402, 31.008742834005705],
                  [75.87906887485542, 31.007602577230692]]]),
            {
              "class": 2,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.87058406371955, 31.003942628663978],
                  [75.87174277801398, 31.004641524168424],
                  [75.87441425819281, 31.006158845456625],
                  [75.87398510475043, 31.006940486392605],
                  [75.87128143806342, 31.005230063777347]]]),
            {
              "class": 2,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.85676023809356, 30.994583455841305],
                  [75.85824081746978, 30.994086820339664],
                  [75.85814425794524, 30.994997316783927],
                  [75.85689971296233, 30.99553073490542],
                  [75.85761854497832, 30.99577904922016],
                  [75.85864851324004, 30.99523643562111],
                  [75.85847685186309, 30.995907804536245],
                  [75.85741469709319, 30.996726316409276],
                  [75.85581610052031, 30.995383585376786]]]),
            {
              "class": 2,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.85036585180205, 30.992348575719305],
                  [75.85172841398162, 30.992615292559726],
                  [75.85182497350615, 30.993691349479597],
                  [75.85051605550689, 30.992790037671476]]]),
            {
              "class": 2,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.84112295953673, 30.991065565323208],
                  [75.84105858652038, 30.99164039290331],
                  [75.83896109907073, 30.992463539966124],
                  [75.83858558980864, 30.991957696243734]]]),
            {
              "class": 2,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.77265152780456, 30.990375767654594],
                  [75.77294120637816, 30.989777938973674],
                  [75.77419648019713, 30.989759544185624],
                  [75.7744432434265, 30.99035737298181],
                  [75.77337035982055, 30.99048613561676],
                  [75.77295193521422, 30.991295496770924],
                  [75.77200779764098, 30.990780449558287]]]),
            {
              "class": 2,
              "system:index": "7"
            })]),
    lake = /* color: #bf04c2 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[75.86226194884307, 30.841019583461865],
                  [75.86289495017058, 30.84072480846441],
                  [75.86332410361297, 30.841120912158114],
                  [75.86285203482635, 30.841857844911914],
                  [75.86225122000701, 30.84108406537185]]]),
            {
              "class": 3,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.8328746482157, 30.8317058956892],
                  [75.83404409134619, 30.832719276173574],
                  [75.83286391937963, 30.83276533866865],
                  [75.83243476593725, 30.832120461725886]]]),
            {
              "class": 3,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.7465907741813, 30.857332762675995],
                  [75.74695555460733, 30.857563015852875],
                  [75.74761001360696, 30.85828140221148],
                  [75.7466980625419, 30.85794062986617],
                  [75.74618307841104, 30.85814325140664],
                  [75.74586121332925, 30.857738007897574]]]),
            {
              "class": 3,
              "system:index": "2"
            })]),
    vegetation = /* color: #ff0000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[75.84055155952251, 30.912504516236712],
                  [75.84158152778423, 30.912559745230883],
                  [75.84147423942363, 30.91360909006342],
                  [75.84055155952251, 30.913535452205]]]),
            {
              "class": 4,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.84046572883403, 30.91114219095628],
                  [75.84119528968608, 30.911031731299715],
                  [75.8413240357188, 30.91171289715065],
                  [75.84050864417827, 30.91171289715065]]]),
            {
              "class": 4,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.82254857261455, 30.907223193497593],
                  [75.82334250648296, 30.908014849723905],
                  [75.82128256995952, 30.908788089018486],
                  [75.82044572074687, 30.907628227733817]]]),
            {
              "class": 4,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.82545663276596, 30.90887140381419],
                  [75.82546736160202, 30.90797849675262],
                  [75.82630421081467, 30.90807975467326],
                  [75.82631493965073, 30.908475580062294],
                  [75.82575704017563, 30.90902789182268],
                  [75.82603598991318, 30.909736687245033],
                  [75.8246519700615, 30.909598610626425]]]),
            {
              "class": 4,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.81954504409714, 30.90764710644517],
                  [75.81918026367111, 30.90746300022297],
                  [75.81914807716294, 30.906984322387785],
                  [75.8197167054741, 30.90681862565627],
                  [75.82001711288376, 30.905806028286168],
                  [75.82019950309677, 30.90487627035774],
                  [75.82037116447373, 30.904047765584124],
                  [75.8206179277031, 30.90372556734659],
                  [75.8206179277031, 30.902630085226654],
                  [75.82100416580124, 30.902712937253817],
                  [75.8201673165886, 30.905787617325736],
                  [75.82008148590012, 30.90861365830123],
                  [75.81980253616257, 30.90861365830123]]]),
            {
              "class": 4,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.80569411674423, 30.90487627035774],
                  [75.80682064453049, 30.905594302027325],
                  [75.8066060678093, 30.90623868483693],
                  [75.80526496330185, 30.906036164992813]]]),
            {
              "class": 4,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.80361272254868, 30.90539178081974],
                  [75.80405260482712, 30.905732384423168],
                  [75.8044817582695, 30.906293917447318],
                  [75.80398823181076, 30.90638597172713],
                  [75.80328012863083, 30.905594302027325]]]),
            {
              "class": 4,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.79498673835678, 30.90723286694718],
                  [75.79880620399399, 30.90703034920673],
                  [75.79905296722336, 30.908116575708735],
                  [75.79800154128952, 30.908070549412184],
                  [75.79782987991257, 30.90902789182268],
                  [75.79489017883225, 30.909000276310387]]]),
            {
              "class": 4,
              "system:index": "7"
            })]),
    fallowland = /* color: #00ff00 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[75.88236759140977, 30.91907353368932],
                  [75.88321516945848, 30.918116291784436],
                  [75.88359067872057, 30.91821753897734],
                  [75.88282893136034, 30.91963498842682],
                  [75.88202426865587, 30.91934045520495]]]),
            {
              "class": 5,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.88136980965623, 30.918162313249034],
                  [75.88185260727892, 30.918070270297697],
                  [75.88180969193468, 30.91853048416889],
                  [75.88101575806627, 30.918484462881384]]]),
            {
              "class": 5,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.84456844338524, 30.907028112981486],
                  [75.84491176613915, 30.90687162170308],
                  [75.84512634286034, 30.907018907619243],
                  [75.84552330979454, 30.907562022476235],
                  [75.84555549630272, 30.90832606019292],
                  [75.84426803597557, 30.907736923214763],
                  [75.8442358494674, 30.907331889438545]]]),
            {
              "class": 5,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.88885874308414, 30.901816187441348],
                  [75.89052171267338, 30.904577906516472],
                  [75.88997454203434, 30.90488169075027],
                  [75.88794512757408, 30.90184769386949]]]),
            {
              "class": 5,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.89139611281223, 30.905070404712998],
                  [75.89162678278751, 30.905415612218636],
                  [75.89001745737858, 30.90625791330711],
                  [75.88986725367374, 30.905599722379197]]]),
            {
              "class": 5,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.90075163398387, 30.898308696529046],
                  [75.90071408305766, 30.8985480574386],
                  [75.89951781783702, 30.89915566321372],
                  [75.89941052947643, 30.897977272743226]]]),
            {
              "class": 5,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[75.95009902619654, 30.891371599490093],
                  [75.95351079606348, 30.89157415035706],
                  [75.95333913468653, 30.892329108905106],
                  [75.95024922990137, 30.89214497322265]]]),
            {
              "class": 5,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70101911033089, 30.90938593009591]),
            {
              "class": 5,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Point([75.72290593589241, 30.90776581262165]),
            {
              "class": 5,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Point([75.72127515281136, 30.907250314946413]),
            {
              "class": 5,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68260842765267, 30.90831812847823]),
            {
              "class": 5,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68402463401253, 30.900254000535906]),
            {
              "class": 5,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68110639060433, 30.90220565545632]),
            {
              "class": 5,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68106347526009, 30.918259268804473]),
            {
              "class": 5,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Point([75.69831544364388, 30.910821920382656]),
            {
              "class": 5,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70728475058968, 30.907213493577647]),
            {
              "class": 5,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Point([75.71659738028939, 30.90610884592739]),
            {
              "class": 5,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Point([75.7147091051429, 30.91049053992136]),
            {
              "class": 5,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Point([75.69668466056282, 30.915902943753206]),
            {
              "class": 5,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68741494620735, 30.906403419880764]),
            {
              "class": 5,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Point([75.6846683641761, 30.906624349750786]),
            {
              "class": 5,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68531209433968, 30.906808457586262]),
            {
              "class": 5,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Point([75.6852262636512, 30.90629295475448]),
            {
              "class": 5,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68471127952034, 30.90610884592739]),
            {
              "class": 5,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68552667106087, 30.905740627210765]),
            {
              "class": 5,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68260842765267, 30.908060381475167]),
            {
              "class": 5,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68256551230843, 30.910932380281427]),
            {
              "class": 5,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68359548057015, 30.912331527962603]),
            {
              "class": 5,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68325215781624, 30.913104732378027]),
            {
              "class": 5,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Point([75.683209242472, 30.91785427956656]),
            {
              "class": 5,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70604020560677, 30.914430211125293]),
            {
              "class": 5,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70505315268929, 30.91476157794305]),
            {
              "class": 5,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70453816855843, 30.91373065518569]),
            {
              "class": 5,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70299321616585, 30.908980903298595]),
            {
              "class": 5,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70097619498665, 30.909017723987393]),
            {
              "class": 5,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Point([75.69466763938362, 30.916897025461594]),
            {
              "class": 5,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Point([75.69402390922005, 30.918848340999084]),
            {
              "class": 5,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Point([75.7103317400306, 30.90301576468066]),
            {
              "class": 5,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70878678763802, 30.904672784921726]),
            {
              "class": 5,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70998841727669, 30.90426773817841]),
            {
              "class": 5,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70612603629525, 30.904230915662197]),
            {
              "class": 5,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70488149131234, 30.906035202297403]),
            {
              "class": 5,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Point([75.703379454264, 30.917265201250856]),
            {
              "class": 5,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70166284049446, 30.91844335425495]),
            {
              "class": 5,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Point([75.70432359183724, 30.919142875736142]),
            {
              "class": 5,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Point([75.69209271872933, 30.91343610378624]),
            {
              "class": 5,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Point([75.69209271872933, 30.91236834736218]),
            {
              "class": 5,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68861657584603, 30.911116479829342]),
            {
              "class": 5,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68861657584603, 30.909570032618944]),
            {
              "class": 5,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68737203086312, 30.909349109548817]),
            {
              "class": 5,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Point([75.69123441184456, 30.91803836579632]),
            {
              "class": 5,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68754369224007, 30.91733883623868]),
            {
              "class": 5,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Point([75.6773727556556, 30.89804453185387]),
            {
              "class": 5,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Point([75.6768148561805, 30.896534698928008]),
            {
              "class": 5,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68539792502816, 30.89480388555227]),
            {
              "class": 5,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68428212607796, 30.896718826169295]),
            {
              "class": 5,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68260842765267, 30.89461975462851]),
            {
              "class": 5,
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68089181388314, 30.89377274781888]),
            {
              "class": 5,
              "system:index": "57"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68501168693001, 30.894288318073528]),
            {
              "class": 5,
              "system:index": "58"
            }),
        ee.Feature(
            ee.Geometry.Point([75.68501168693001, 30.893846400882357]),
            {
              "class": 5,
              "system:index": "59"
            }),
        ee.Feature(
            ee.Geometry.Point([75.95464306995018, 30.95057017728114]),
            {
              "class": 5,
              "system:index": "60"
            }),
        ee.Feature(
            ee.Geometry.Point([75.95387059375389, 30.95108544147707]),
            {
              "class": 5,
              "system:index": "61"
            }),
        ee.Feature(
            ee.Geometry.Point([75.95378476306541, 30.949539640552764]),
            {
              "class": 5,
              "system:index": "62"
            }),
        ee.Feature(
            ee.Geometry.Point([75.95507222339256, 30.95005491030637]),
            {
              "class": 5,
              "system:index": "63"
            }),
        ee.Feature(
            ee.Geometry.Point([75.95369893237694, 30.94931880980773]),
            {
              "class": 5,
              "system:index": "64"
            }),
        ee.Feature(
            ee.Geometry.Point([75.95249730273827, 30.95115905042106]),
            {
              "class": 5,
              "system:index": "65"
            }),
        ee.Feature(
            ee.Geometry.Point([75.95447140857323, 30.95344089955564]),
            {
              "class": 5,
              "system:index": "66"
            }),
        ee.Feature(
            ee.Geometry.Point([75.95387059375389, 30.953293685127125]),
            {
              "class": 5,
              "system:index": "67"
            }),
        ee.Feature(
            ee.Geometry.Point([75.97919064685448, 30.956679559587126]),
            {
              "class": 5,
              "system:index": "68"
            }),
        ee.Feature(
            ee.Geometry.Point([75.97850400134666, 30.95697397778159]),
            {
              "class": 5,
              "system:index": "69"
            }),
        ee.Feature(
            ee.Geometry.Point([75.92511731311424, 30.95977090536717]),
            {
              "class": 5,
              "system:index": "70"
            }),
        ee.Feature(
            ee.Geometry.Point([75.92588978931053, 30.959991711951435]),
            {
              "class": 5,
              "system:index": "71"
            }),
        ee.Feature(
            ee.Geometry.Point([75.92726308032616, 30.960506925329486]),
            {
              "class": 5,
              "system:index": "72"
            }),
        ee.Feature(
            ee.Geometry.Point([75.92520314380272, 30.959476495794046]),
            {
              "class": 5,
              "system:index": "73"
            }),
        ee.Feature(
            ee.Geometry.Point([75.92503148242577, 30.959697303058956]),
            {
              "class": 5,
              "system:index": "74"
            }),
        ee.Feature(
            ee.Geometry.Point([75.94434338733299, 30.96418694005713]),
            {
              "class": 5,
              "system:index": "75"
            }),
        ee.Feature(
            ee.Geometry.Point([75.94442921802147, 30.96418694005713]),
            {
              "class": 5,
              "system:index": "76"
            }),
        ee.Feature(
            ee.Geometry.Point([75.94528752490623, 30.963524547871735]),
            {
              "class": 5,
              "system:index": "77"
            }),
        ee.Feature(
            ee.Geometry.Point([75.94382840320213, 30.96367174653223]),
            {
              "class": 5,
              "system:index": "78"
            }),
        ee.Feature(
            ee.Geometry.Point([75.94460087939842, 30.963745345777394]),
            {
              "class": 5,
              "system:index": "79"
            })]),
    Punjab = ee.FeatureCollection("users/prakhar/Shapefiles/punjab_admin"),
    nDSM_Punjab = ee.Image("users/prakhar/DBH_Punjab");
    
    
    
    
   /*
// Documentation: https://github.com/mprakhar/Aakash_UM
// Author: Prakhar Misra
// Created: 20190910
// Last updated: 20190910
// Purpose: Code to identify land-use of the urban morphology using building height and nighttime light information
*/


Map.centerObject(location);

var clip_loc = Punjab;


// Define the threshold to differentiate vegetation adn non-vegetation
var greenThreshold = 0.7;

// bands to be considered
var Landsat_8_BANDS = ['B2', 'B3', 'B4', 'B5', 'B6', 'B7' ];
var Landsat_7_BANDS = ['B1',   'B2',    'B3',  'B4',  'B5',  'B7'];
var STD_NAMES       = ['blue', 'green', 'red', 'nir', 'swir1', 'swir2'];


function maskL8sr(image) {
  // Bits 3 and 5 are cloud shadow and cloud, respectively.
  var cloudShadowBitMask = (1 << 3);
  var cloudsBitMask = (1 << 5);
  // Get the pixel QA band.
  var qa = image.select('pixel_qa');
  // Both flags should be set to zero, indicating clear conditions.
  var mask = qa.bitwiseAnd(cloudShadowBitMask).eq(0)
                 .and(qa.bitwiseAnd(cloudsBitMask).eq(0));
  return image.updateMask(mask);
}


/// Initial Landsat functions
function getlandsat8(imageC, start_date, end_date, location){
  var l8_l1t = ee.ImageCollection(imageC)
  .filterDate(start_date, end_date)
  .filterBounds(location).map(maskL8sr).select(Landsat_8_BANDS, STD_NAMES).median().clip(clip_loc); 
  return l8_l1t;
}

// make ndvi function
function addNDVI(image) {
  return image
    .addBands(image.normalizedDifference(['nir', 'red']).rename('NDVI'))
  ;
}





// -------------------------------------------------------------
//  ------------  Land cover classification step   ------------    
// -------------------------------------------------------------


// Initialze dates
var start_date = ee.Date.fromYMD(2017,04,12); 
var end_date = ee.Date.fromYMD(2017,05,17);

// Get landsat data
var l8_l1t = getlandsat8(landsat8, start_date, end_date, clip_loc);
Map.addLayer(l8_l1t, {bands: ['red', 'green', 'blue'], min:0, max:2500}, 'L8', 0);

// add a new band as  NDVI
var newL8Composite = addNDVI(l8_l1t);

// bands to classifiy on 
var bands =['blue', 'green', 'red', 'nir', 'swir1', 'swir2','NDVI' ]

// merge training samples
var training_pts = builtup.merge(river).merge(lake).merge(vegetation).merge(fallowland);

var training = newL8Composite.select(bands).sampleRegions({
  collection: training_pts, 
  properties: ['class'], 
  scale: 30
});
// print(training)

var classifier = ee.Classifier.randomForest(100).train({
  features: training, 
  classProperty: 'class', 
  inputProperties: bands
});
// print(classifier.explain());

var LCclassified = newL8Composite.select(bands).classify(classifier);
Map.addLayer(LCclassified, {min: 1, max: 5, palette: ['red', 'blue', 'blue', 'green', 'yellow']}, 'L8Class', 0);


// Notes:
// TRY: interesting to als oadd indicator for the blue roof of the factories




// -------------------------------------------------------------
//  ------------    Prepapre NL, DSM dataset     ---------------
// -------------------------------------------------------------


// Display nDSM 
var nDSM_location = nDSM_Punjab.clip(clip_loc);
print (nDSM_location);
Map.addLayer(nDSM_location, {bands: ['b1'], min:0, max:15}, 'nDSM', 0);

//Display nighttime light
var nighttimeLight = ee.ImageCollection(nighttimeLightC).select("avg_rad").filterDate('2014-1-01', '2014-1-31').median().clip(clip_loc);
print (nighttimeLight);
Map.addLayer(nighttimeLight, {bands: ["avg_rad"], min:0, max:20}, 'TNL', 0);

// Dsiplay GHSL layer
var builtUpMultitemporal = GHSL.select('built');
var visParams = {
  min: 1.0,
  max: 6.0,
  palette: ['0c1d60', '000000', '448564', '70daa4', '83ffbf', 'ffffff'],
};
Map.addLayer(builtUpMultitemporal, visParams, 'GHSL', 0);

// remove hills
//var nonhills = (nDSM_location.select('b1').lt(100)).and(texture.gt(1500));
//var hills = ee.Algorithms.If(nDSM_location.select('b1').gt(0)  || month === 5 || month === 6 );

// applying filter on height. get rid of useless data
var filterDBH = nDSM_location.select('b1').gt(3);
var filterGHSL = builtUpMultitemporal.select('built').neq(2);
var filterBuilt = LCclassified.select('classification').eq(1);
var filterNL = nighttimeLight.select("avg_rad").gt(1);

Map.addLayer(filterDBH, {},"filter");

// Display Greenest pixel
var greenestL8 = ee.ImageCollection(greenestL8C).select("greenness").filterDate('2014-1-01', '2014-12-15').median().clip(location);
Map.addLayer(greenestL8, {bands: ["greenness"], min:0, max:1}, 'Greenest pixel', 0);





// -------------------------------------------------------------
//  ------------    NL, nDSM classification step ---------------
// -------------------------------------------------------------

var nDSM_locationF = nDSM_location.select('b1').multiply(filterDBH);

// get urban nDSM by multiplying nDSM with a threshold
var newComposite = nDSM_locationF.addBands(nighttimeLight.select("avg_rad"))
.addBands(greenestL8.select("greenness")).addBands(AW3D30.select("AVE"));
Map.addLayer(newComposite, {bands: ["b1", "avg_rad", "greenness"], min:0, max:10}, 'nDSM,TNL,greenest', 0);


// bands to classify on
var bands =['avg_rad',  "b1"]; // , 'greenness', 'AVE',  ];

// merge all R,C,I training data
var training_pts = R.merge(C).merge(I);

var training = newComposite.select(bands).sampleRegions({
  collection: training_pts, 
  properties: ['class'], 
  scale: 30
});

var classifier = ee.Classifier.svm({svmType: "C_SVC", kernelType:"RBF", gamma: 0.001, cost :100})
.train({
  features: training,
  classProperty : 'class',
  inputProperties: bands
});

// classify and display
var SVMclassified = newComposite.clip(clip_loc).select(bands).classify(classifier);
Map.addLayer(SVMclassified, {min:1, max:3, palette:['white', 'blue', 'red']}, 'SVM UM', 1);

// applying filter
var filterUM = SVMclassified.multiply(filterDBH).multiply(filterBuilt);
//var filterCART2 = filterCART1.multiply(nonhills);
Map.addLayer(filterUM, {min:0, max:3, palette:['green', 'white', 'blue', 'red']}, 'filtered UM', 1);

// extarct each UM type
var residential = filterUM.select("classification").eq(0).and(filterBuilt).rename("R");
var commercial = filterUM.select("classification").eq(2).and(filterBuilt).and(filterNL).rename("C");
var industrial = filterUM.select("classification").eq(3).and(filterBuilt).rename("I");

//Map.addLayer(residential, {}, "residential");

// Combine all the urban morphology
var UMimage = residential.addBands(commercial).addBands(industrial);
Map.addLayer(UMimage,   {bands: ['R', 'C', 'I'], min:0, max:1},  "UM");


// -------------------------------------------------------------
//  ------------    Linked map App     ---------------
// -------------------------------------------------------------

// Each map has a name and some visualization parameters.
var MAP_image = {
  'Natural Color (B4/B3/B2)': newL8Composite,
  'Nighttitme Light': nighttimeLight,
  'Digital Building Height': nDSM_location,
  'Built Land-use': UMimage
};


// Each map has a name and some visualization parameters.
var MAP_PARAMS = {
  'Natural Color (B4/B3/B2)': ['red', 'green', 'blue'],
  'Nighttitme Light': ['avg_rad'],
  'Digital Building Height': ['b1'],
  'Built Land-use': ['R', 'C', 'I']
};

// Shared visualization parameters for the images.
var VIS_PARAMS =  {
  'Natural Color (B4/B3/B2)': {bands: ['red', 'green', 'blue'], min:0, max:2500}, 
  'Nighttitme Light': { min:0, max:35, palette:["black", "orange"]},
  'Digital Building Height': { min:0, max:15, palette:["white", "red"]},
  'Built Land-use': {bands: ['I', 'C', 'R'], min:0, max:1}
};


// Create a map for each visualization option.
var maps = [];
Object.keys(MAP_PARAMS).forEach(function(name) {
  var map = ui.Map();
  map.setOptions("SATELLITE" );
  map.add(ui.Label(name));
  map.addLayer(MAP_image[name], VIS_PARAMS[name], name);
  map.setControlVisibility(false);
  maps.push(map);
});


var linker = ui.Map.Linker(maps);

// Enable zooming on the top-left map.
maps[0].setControlVisibility({zoomControl: true});

// Show the scale (e.g. '500m') on the bottom-right map.
maps[3].setControlVisibility({scaleControl: true});

// Create a grid of maps.
var mapGrid = ui.Panel(
    [
      ui.Panel([maps[0], maps[1]], null, {stretch: 'both'}),
      ui.Panel([maps[2], maps[3]], null, {stretch: 'both'})
    ],
    ui.Panel.Layout.Flow('horizontal'), {stretch: 'both'});

maps[0].setCenter(75.8932, 30.9129, 12);



// Create a title.
var title = ui.Label('Built Land-use in Punjab', {
  stretch: 'horizontal',
  textAlign: 'center',
  fontWeight: 'bold',
  fontSize: '24px'
});

// Add the maps and title to the ui.root.
ui.root.widgets().reset([title, mapGrid]);
ui.root.setLayout(ui.Panel.Layout.Flow('vertical'));
    
